---
import { getCollection } from 'astro:content';
import GameLayout from '../layouts/GameLayout.astro';
import GameListItem from '../components/GameListItem.astro';

const games = (await getCollection('games')).sort(
  (a, b) => new Date(b.data.generatedAt).getTime() - new Date(a.data.generatedAt).getTime()
);
---

<GameLayout title="ãƒ›ãƒ¼ãƒ ">
  {games.length === 0 ? (
    <p class="empty">ã¾ã è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚`npm run generate` ã§ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚</p>
  ) : (
    <section class="games-section">
      <h2>ğŸ® ã‚²ãƒ¼ãƒ ä¸€è¦§</h2>
      <div class="game-list">
        {games.map((game) => (
          <GameListItem
            slug={game.id}
            title={game.data.title}
            headerImage={game.data.headerImage}
            genres={game.data.genres}
            price={game.data.price}
            developer={game.data.developer}
            reviewScore={game.data.reviewScore}
            reviewPercentage={game.data.reviewPercentage}
            kansaiCatch={game.data.kansaiCatch}
          />
        ))}
      </div>
    </section>
  )}
</GameLayout>

<style>
  /* ã‚²ãƒ¼ãƒ ä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
  .games-section {
    max-width: 1200px;
    margin: 3rem auto;
    padding: 0 1rem;
  }

  .games-section h2 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 3px solid var(--accent);
  }

  /* ãƒªã‚¹ãƒˆï¼ˆç¸¦ä¸¦ã³ï¼‰ */
  .game-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-top: 2rem;
  }

  /* 0ä»¶æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
  .empty {
    text-align: center;
    padding: 4rem 1rem;
    font-size: 1.2rem;
  }

  /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–èª¿æ•´ */
  @media (max-width: 768px) {
    .games-section h2 {
      font-size: 1.5rem;
    }
  }
</style>
